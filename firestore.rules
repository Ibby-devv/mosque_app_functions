rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // ========================================================================
    // PRAYER TIMES & EXISTING RULES
    // ========================================================================
    
    // Prayer times - public read, admin write
    match /prayerTimes/{document=**} {
      allow read: if true;
      allow write: if request.auth != null;
    }

     match /jumuahTimes/{document=**} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    // Mosque settings - public read, admin write
    match /mosqueSettings/{document=**} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    // Events - public read, admin write
    match /events/{document=**} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    // Event Categories - public read, admin write
    match /eventCategories/{document=**} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    // ========================================================================
    // DONATION RULES
    // ========================================================================
    
    // Donation settings - public read (mobile app needs this), admin write
    match /donationSettings/{document} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    // Donations - admin only view, Cloud Functions only write
    match /donations/{donationId} {
      allow read: if request.auth != null;
      allow write: if false;
    }
    
    // Campaigns - public read, admin write
    match /campaigns/{campaignId} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    // Recurring donations - admin only
    match /recurringDonations/{subscriptionId} {
      allow read: if request.auth != null;
      allow write: if false;
    }
    
    // Receipt counter - admin read, Cloud Functions only write
    match /receiptCounter/{document} {
      allow read: if request.auth != null;
      allow write: if false;
    }
  }
}